<template>
	<div class="punch-page-wrapper dark:bg-slate-700 bg-white rounded-[24px] p-3 xl:p-6">
		<div class="w-full flex gap-2">
			<div class="grow page-data">
				<PageHeading text="EJS (Embedded JavaScript)" addOnClass="text-left" markedAs="about-ejs" />

				<p class="text-slate-900 dark:text-white mt-5 leading-8">
					EJS l√† m·ªôt template engine cho ph√©p b·∫°n nh√∫ng m√£ JavaScript v√†o HTML. N√≥ r·∫•t ph·ªï bi·∫øn khi s·ª≠ d·ª•ng v·ªõi Node.js
					v√† Express ƒë·ªÉ render n·ªôi dung ƒë·ªông t·ª´ ph√≠a server. EJS cho ph√©p b·∫°n ch√®n c√°c gi√° tr·ªã ƒë·ªông, th·ª±c hi·ªán l·∫∑p, ƒëi·ªÅu
					ki·ªán, v√† qu·∫£n l√Ω b·ªë c·ª•c cho trang web c·ªßa b·∫°n.
					<br />
					ƒê·ªÉ s·ª≠ d·ª•ng ƒë∆∞·ª£c <b>`EJS`</b> th√¨ b·∫°n c·∫ßn c√†i ƒë·∫∑t package <FilePath>ejs</FilePath> v√† t·∫°o file c√≥ ƒëu√¥i l√†
					<b>.ejs</b>. VD: <b>homepage.ejs</b>
					<br />
					<b>C√°c t√≠nh nƒÉng ch√≠nh c·ªßa EJS:</b>
				</p>
				<ul class="pl-10">
					<li class="text-slate-900 dark:text-white my-5 leading-8 text-lg text-content marker:text-sky-400 list-disc">
						<span> Nh√∫ng JavaScript tr·ª±c ti·∫øp trong HTML.</span>
					</li>
					<li class="text-slate-900 dark:text-white my-5 leading-8 text-lg text-content marker:text-sky-400 list-disc">
						<span> ƒêi·ªÅu ki·ªán (if-else), l·∫∑p (for, while), v√† c√°c thao t√°c logic kh√°c.</span>
					</li>
					<li class="text-slate-900 dark:text-white my-5 leading-8 text-lg text-content marker:text-sky-400 list-disc">
						<span> H·ªó tr·ª£ include, gi√∫p t√°i s·ª≠ d·ª•ng c√°c ph·∫ßn view chung (nh∆∞ header, footer).</span>
					</li>
				</ul>

				<PageHeading text="B·∫£ng danh s√°ch c√°c t√≠nh nƒÉng" addOnClass="text-left mt-5" markedAs="about-ejs-features" />
				<p class="text-slate-900 dark:text-white mt-5 leading-8">
					M·ªôt s·ªë c√°c t√≠nh nƒÉng n·ªïi b·∫≠t c·ªßa EJS s·∫Ω ƒë∆∞·ª£c t√¥i t·ªïng h·ª£p l·∫°i nh∆∞ sau:
				</p>
				<div class="relative overflow-x-auto mt-5 border rounded-lg">
					<table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
						<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-200">
							<tr>
								<th scope="col" class="px-5 py-3">T√≠nh nƒÉng</th>
								<th scope="col" class="px-5 py-3">√ù nghƒ©a</th>
								<th scope="col" class="px-5 py-3">VD:</th>
							</tr>
						</thead>
						<tbody>
							<tr
								v-for="item in commonMethods"
								:key="item.id"
								class="bg-white border-b dark:bg-gray-800 dark:border-gray-700"
							>
								<th
									v-if="item.label"
									colspan="3"
									scope="row"
									class="px-5 py-4 text-center font-semibold text-gray-900 whitespace-nowrap bg-neutral-200"
								>
									{{ item.label }}
								</th>
								<th
									v-if="!item.label"
									scope="row"
									class="px-5 py-4 font-semibold text-gray-900 whitespace-nowrap dark:text-white"
								>
									{{ item.name }}
								</th>
								<td v-if="!item.label" class="px-5 py-4">{{ item.desc }}</td>
								<td v-if="!item.label" class="px-5 py-4" v-html="item.syntax"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<PageHeading text="V√≠ d·ª•:" addOnClass="text-left mt-5" markedAs="example" />
				<p class="text-slate-900 dark:text-white mt-5 leading-8">V√≠ d·ª• v·ªÅ vi·ªác t·∫°o view v·ªõi ejs</p>
				<div>
					<p class="text-slate-900 dark:text-white mt-5 leading-8 font-bold">1. C·∫•u tr√∫c file:</p>
					<VCodeBlock :code="b1" highlightjs lang="php" theme="tomorrow-night-bright" />
				</div>

				<div>
					<p class="text-slate-900 dark:text-white mt-5 leading-8 font-bold">2. T·∫°o header:</p>
					<VCodeBlock :code="b2" highlightjs lang="html" theme="tomorrow-night-bright" />
				</div>

				<div>
					<p class="text-slate-900 dark:text-white mt-5 leading-8 font-bold">3. T·∫°o homepage v√† include:</p>
					<VCodeBlock :code="b3" highlightjs lang="html" theme="tomorrow-night-bright" />
				</div>

				<p class="text-slate-900 dark:text-white mt-5 leading-8">
					Sau khi serve th√¨ ta s·∫Ω c√≥ k·∫øt qu·∫£. K·∫øt qu·∫£ t·ª± serve nha üòíüëå
				</p>

				<p class="text-slate-900 dark:text-white leading-8">
					L√Ω thuy·∫øt ƒë·ªß r·ªìi, l√†m
					<a
						href="/nodejs/practice/e_2"
						target="_blank"
						rel="noreferrer"
						class="inline-block px-1 rounded text-slate-900 dark:text-white underline decoration-2 hover:text-cyan-500"
					>
						b√†i t·∫≠p
					</a>
					n√†o.
				</p>

				<doc-next-page :pagination="pagePagination" />
			</div>
			<PageMarkBook />
		</div>
	</div>
</template>
<script lang="ts">
	import PageMarkBook from '@/components/Documentation/PageMarkBook.vue';
	import PageHeading from '@/components/Documentation/PageHeading.vue';
	import FakeTerminalUI from '@/components/FakeTerminalUI.vue';
	import DocNextPage from '@/components/DocNextPage.vue';
	import VCodeBlock from '@wdns/vue-code-block';
	import { apiResponde } from 'models';
	import { Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue';
	export default {
		components: {
			PageMarkBook,
			PageHeading,
			FakeTerminalUI,
			VCodeBlock,
			DocNextPage,
			Disclosure,
			DisclosureButton,
			DisclosurePanel,
		},
		data() {
			return {
				pagePagination: {
					next: {
						title: 'HTML Styles',
						link: '/nodejs/documentation/ep-2',
					},
					prev: {
						title: 'Tr·ªü v·ªÅ danh s√°ch Doc',
						link: '/nodejs/documentation',
					},
				},
				b1: `myapp/
‚îÇ....
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îî‚îÄ‚îÄ partials
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ header.ejs
‚îÇ   ‚îî‚îÄ‚îÄ homepage.ejs
‚îÇ
‚îú‚îÄ‚îÄ app.js
‚îî‚îÄ‚îÄ package.json
`,
				b2: `// header.js
<header>
  <h1>
    <%= pageTitle %>
  </h1>
  <nav>
    <a href="/">Trang ch·ªß</a> |
    <a href="/about">Gi·ªõi thi·ªáu</a>
  </nav>
</header>
`,
				b3: `// homepage.js
<!DOCTYPE html>
<html lang="en">

<body>
  <%- include('partials/header', { pageTitle: 'Trang ch·ªß' }) %>
    <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi trang ch·ªß!</p>
</body>

</html>
`,

				commonMethods: [
					{
						id: 1,
						name: 'Bi·∫øn trong EJS',
						desc: 'Hi·ªÉn th·ªã gi√° tr·ªã c·ªßa c√°c bi·∫øn ƒë∆∞·ª£c truy·ªÅn v√†o t·ª´ server.',
						syntax: '<%= variable %>',
					},
					{
						id: 2,
						name: 'Th·ª±c thi m√£ JavaScript',
						desc: 'Ch·∫°y c√°c ƒëo·∫°n m√£ JavaScript b√™n trong template m√† kh√¥ng xu·∫•t ra m√†n h√¨nh.',
						syntax: '<% JavaScript code %>',
					},
					{
						id: 3,
						name: 'ƒêi·ªÅu ki·ªán (if)',
						desc: 'S·ª≠ d·ª•ng ƒëi·ªÅu ki·ªán if-else trong EJS ƒë·ªÉ x·ª≠ l√Ω logic hi·ªÉn th·ªã.',
						syntax: `
        <% if (condition) { %>
            <p>Condition is true</p>
        <% } else { %>
            <p>Condition is false</p>
        <% } %>
    `,
					},
					{
						id: 4,
						name: 'V√≤ng l·∫∑p (for)',
						desc: 'S·ª≠ d·ª•ng v√≤ng l·∫∑p for ƒë·ªÉ l·∫∑p qua c√°c ph·∫ßn t·ª≠ trong m·∫£ng v√† hi·ªÉn th·ªã.',
						syntax: `
        <% for (let i = 0; i < items.length; i++) { %>
            <p><%= items[i] %></p>
        <% } %>
    `,
					},
					{
						id: 5,
						name: 'Include (bao g·ªìm)',
						desc: 'T√°i s·ª≠ d·ª•ng c√°c ph·∫ßn c·ªßa trang (nh∆∞ header, footer) b·∫±ng c√°ch nh√∫ng ch√∫ng v√†o c√°c template kh√°c.',
						syntax: '<%- include("header") %>',
					},
					{
						id: 6,
						name: 'Escape n·ªôi dung',
						desc: 'Hi·ªÉn th·ªã n·ªôi dung c·ªßa bi·∫øn v·ªõi kh·∫£ nƒÉng escape c√°c k√Ω t·ª± HTML ƒë·∫∑c bi·ªát.',
						syntax: '<%- variable %>',
					},
					{
						id: 7,
						name: 'Comment',
						desc: 'Ch√®n comment v√†o file EJS m√† kh√¥ng hi·ªÉn th·ªã trong k·∫øt qu·∫£ render.',
						syntax: '<%# This is a comment %>',
					},
					{
						id: 8,
						name: 'Partial',
						desc: 'S·ª≠ d·ª•ng partials ƒë·ªÉ chia nh·ªè c√°c ph·∫ßn c·ªßa giao di·ªán v√† t√°i s·ª≠ d·ª•ng ch√∫ng trong c√°c template kh√°c.',
						syntax: '<%- include("partials/footer") %>',
					},
				],
			};
		},
		mounted() {
			this.getPagination();
		},
		methods: {
			getPagination() {
				this.$api.documentations
					.getPagination({ appIds: 'nodejs', currentDocId: 'node-7' })
					.then((res: apiResponde) => {
						this.pagePagination = res?.data?.pagination || [];
					});
			},
		},
	};
</script>
